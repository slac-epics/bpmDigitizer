
record( fanout, "$(IOC):attenuator1Fanout" )
{
	field(LNK1, "$(IOC):do0:port0:out1 PP")
	field(LNK2, "$(IOC):do0:port0:out2 PP")
	field(LNK3, "$(IOC):do0:port0:out3 PP")
	field(LNK4, "$(IOC):do0:port0:out4 PP")
}

record( fanout, "$(IOC):attenuator2Fanout" )
{
	field(LNK1, "$(IOC):do0:port1:out1 PP")
	field(LNK2, "$(IOC):do0:port1:out2 PP")
	field(LNK3, "$(IOC):do0:port1:out3 PP")
	field(LNK4, "$(IOC):do0:port1:out4 PP")
}

record(longout, "$(IOC):attenuator1")
{
	field(DESC, "BTAM Attenuator 1")
	field(LOPR, "1")
	field(HOPR, "15")
	field(FLNK, "$(IOC):attenuator1Multibit PP")
}

record(longout, "$(IOC):attenuator2")
{
	field(DESC, "BTAM Attenuator 2")
	field(LOPR, "1")
	field(HOPR, "15")
	field(FLNK, "$(IOC):attenuator2Multibit PP")
}

record(bo, "$(IOC):attenuator1_up")
{
	field(FLNK, "$(IOC):attenuator1_incr PP")
}

record(bo, "$(IOC):attenuator2_up")
{
	field(FLNK, "$(IOC):attenuator2_incr PP")
}

record(calcout, "$(IOC):attenuator1_incr")
{
	field(CALC,	"A<15?(A+I):A")
	field(INPA,	"$(IOC):attenuator1 NPP")
	field(INPI,	"$(IOC):attenuator1_up")
	field(OUT,	"$(IOC):attenuator1")
	field(FLNK,	"$(IOC):attenuator1 PP")
}

record(calcout, "$(IOC):attenuator2_incr")
{
	field(CALC,	"A<15?(A+I):A")
	field(INPA,	"$(IOC):attenuator2 NPP")
	field(INPI,	"$(IOC):attenuator2_up")
	field(OUT,	"$(IOC):attenuator2")
	field(FLNK,	"$(IOC):attenuator2 PP")
}

record(bo, "$(IOC):attenuator1_down")
{
	field(FLNK, "$(IOC):attenuator1_decr PP")
}

record(bo, "$(IOC):attenuator2_down")
{
	field(FLNK, "$(IOC):attenuator2_decr PP")
}

record(calcout, "$(IOC):attenuator1_decr")
{
	field(CALC,	"A>0?A-I:A")
	field(INPA,	"$(IOC):attenuator1 NPP")
	field(INPI,	"$(IOC):attenuator1_down")
	field(OUT,	"$(IOC):attenuator1")
	field(FLNK,	"$(IOC):attenuator1 PP")
}

record(calcout, "$(IOC):attenuator2_decr")
{
	field(CALC,	"A>0?A-I:A")
	field(INPA,	"$(IOC):attenuator2 NPP")
	field(INPI,	"$(IOC):attenuator2_down")
	field(OUT,	"$(IOC):attenuator2")
	field(FLNK,	"$(IOC):attenuator2 PP")
}

record(mbbiDirect, "$(IOC):attenuator1Multibit")
{
	field(DESC, "Att 1 multibit breakout")
	field(INP, "$(IOC):attenuator1 NPP" )
	field(FLNK, "$(IOC):attenuator1Fanout PP")
}

record(mbbiDirect, "$(IOC):attenuator2Multibit")
{
	field(DESC, "Att 2 multibit breakout")
	field(INP, "$(IOC):attenuator2 NPP" )
	field(FLNK, "$(IOC):attenuator2Fanout PP")
}

record(bo, "$(IOC):do0:port0:out0" )
{
	field(DESC, "BeamTimeMonitor1 Resync Ctrl")
	field(DTYP, "ACROMAG-IP445")
	field(OUT, "@do0 P0 B1")
	field(ZNAM, "Off")
	field(ONAM, "On")
	field(FLNK, "UND:R01:BTM:01:resync PP")
}

record(bo, "$(IOC):do0:port1:out0" )
{
	field(DESC, "BeamTimeMonitor2 Resync Ctrl")
	field(DTYP, "ACROMAG-IP445")
	field(OUT, "@do0 P1 B1")
	field(ZNAM, "Off")
	field(ONAM, "On")
	field(FLNK, "UND:R01:BTM:02:resync PP")
}

record(bo, "UND:R01:BTM:01:resync" )
{
	field(DESC, "BeamTimeMonitor1 Resync Ctrl")
	field(DOL, "do0:port0:out0 NPP" )
	field(OMSL, "closed_loop" )
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "UND:R01:BTM:02:resync" )
{
	field(DESC, "BeamTimeMonitor2 Resync Ctrl")
	field(DOL, "do0:port1:out0 NPP" )
	field(OMSL, "closed_loop" )
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port0:out1" )
{
	field(DESC, "RF Attenuator 1 Ctrl 1")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attenuator1Multibit.B0 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P0 B1")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port1:out1" )
{
	field(DESC, "RF Attenuator 2 Ctrl 1")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attenuator2Multibit.B0 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P1 B1")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port0:out2" )
{
	field(DESC, "RF Attenuator 1 Ctrl 2")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attenuator1Multibit.B1 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P0 B2")
	field(SCAN, "Passive")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port1:out2" )
{
	field(DESC, "RF Attenuator 2 Ctrl 2")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attenuator2Multibit.B1 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P1 B2")
	field(SCAN, "Passive")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port0:out3" )
{
	field(DESC, "RF Attenuator 1 Ctrl 3")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attenuator1Multibit.B2 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P0 B3")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port1:out3" )
{
	field(DESC, "RF Attenuator 2 Ctrl 3")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attenuator2Multibit.B2 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P1 B3")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port0:out4" )
{
	field(DESC, "RF Attenuator 1 Ctrl 4")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attenuator1Multibit.B3 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P0 B4")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port1:out4" )
{
	field(DESC, "RF Attenuator 2 Ctrl 4")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attenuator2Multibit.B3 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P1 B4")
	field(ZNAM, "Off")
	field(ONAM, "On")
}
