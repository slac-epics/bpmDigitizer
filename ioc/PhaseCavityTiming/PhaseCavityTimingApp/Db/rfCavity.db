
record( fanout, "$(IOC):attFanout" )
{
	field(LNK1, "$(IOC):do0:port0:out1 PP")
	field(LNK2, "$(IOC):do0:port0:out2 PP")
	field(LNK3, "$(IOC):do0:port0:out3 PP")
	field(LNK4, "$(IOC):do0:port0:out4 PP")
}

record(longout, "$(IOC):attenuator")
{
	field(DESC, "RF Cavity Attenuator")
	field(LOPR, "1")
	field(HOPR, "15")
	field(FLNK, "$(IOC):attMultibit PP")
}

record(bo, "$(IOC):attenuator_up")
{
	field(FLNK, "$(IOC):attenuator_incr PP")
}

record(calcout, "$(IOC):attenuator_incr")
{
	field(CALC,	"A<15?(A+I):A")
	field(INPA,	"$(IOC):attenuator NPP")
	field(INPI,	"$(IOC):attenuator_up")
	field(OUT,	"$(IOC):attenuator")
	field(FLNK,	"$(IOC):attenuator PP")
}

record(bo, "$(IOC):attenuator_down")
{
	field(FLNK, "$(IOC):attenuator_decr PP")
}

record(calcout, "$(IOC):attenuator_decr")
{
	field(CALC,	"A>0?A-I:A")
	field(INPA,	"$(IOC):attenuator NPP")
	field(INPI,	"$(IOC):attenuator_down")
	field(OUT,	"$(IOC):attenuator")
	field(FLNK,	"$(IOC):attenuator PP")
}

record(mbbiDirect, "$(IOC):attMultibit")
{
	field(DESC, "Attenuator multibit breakout")
	field(INP, "$(IOC):attenuator NPP" )
	field(FLNK, "$(IOC):attFanout PP")
}

record(bo, "$(IOC):do0:port0:out0" )
{
	field(DESC, "BeamTimeMonitor Resync Ctrl")
	field(DTYP, "ACROMAG-IP445")
	field(OUT, "@do0 P0 B1")
	field(ZNAM, "Off")
	field(ONAM, "On")
	field(FLNK, "UND:R01:BTM:01:resync PP")
}

record(bo, "UND:R01:BTM:01:resync" )
{
	field(DESC, "BeamTimeMonitor Resync Ctrl")
	field(DOL, "do0:port0:out0 NPP" )
	field(OMSL, "closed_loop" )
	field(ZNAM, "Off")
	field(ONAM, "On")
}


record(bo, "$(IOC):do0:port0:out1" )
{
	field(DESC, "RF Attenuator Ctrl 1")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attMultibit.B0 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P0 B1")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port0:out2" )
{
	field(DESC, "RF Attenuator Ctrl 2")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attMultibit.B1 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P0 B2")
	field(SCAN, "Passive")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port0:out3" )
{
	field(DESC, "RF Attenuator Ctrl 3")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attMultibit.B2 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P0 B3")
	field(ZNAM, "Off")
	field(ONAM, "On")
}

record(bo, "$(IOC):do0:port0:out4" )
{
	field(DESC, "RF Attenuator Ctrl 4")
	field(DTYP, "ACROMAG-IP445")
	field(DOL, "$(IOC):attMultibit.B3 NPP" )
	field(OMSL, "closed_loop" )
	field(OUT, "@do0 P0 B4")
	field(ZNAM, "Off")
	field(ONAM, "On")
}
